R"D8ESKJ6H4DSKHU(
<!DOCTYPE html>
<html lang="en">
<head>
   <title>flippie - low-level</title>
   <meta charset="utf-8" />
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, initial-scale=1" />
   <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" />
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" />
   <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
   <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet" />
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
   <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
   <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->
   <style>
   body {
      padding-top: 70px;
      padding-bottom: 30px;
   }
   .btn not-active {
      color: #3276b1;
      background-color: #fff;
   }
   .glyphicon-refresh-animate {
       -animation: spin .7s infinite linear;
       -webkit-animation: spin2 .7s infinite linear;
   }

   @-webkit-keyframes spin2 {
       from { -webkit-transform: rotate(0deg);}
       to { -webkit-transform: rotate(360deg);}
   }

   @keyframes spin {
       from { transform: scale(1) rotate(0deg);}
       to { transform: scale(1) rotate(360deg);}
   }
   </style>
</head>
<body>
   <!-- Fixed navbar -->
   <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
         <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
               <span class="sr-only">Toggle navigation</span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Flippie</a>
         </div>
         <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
               <li><a href="/ui/index.html">Start</a></li>
               <li><a href="/ui/tasks.html">Tasks</a></li>
               <li class="active"><a href="/ui/low_level.html">Low-Level</a></li>
               <li><a href="/ui/paint.html">Paint</a></li>
               <li><a href="/ui/tests.html">Tests</a></li>
            </ul>
         </div><!--/.nav-collapse -->
      </div>
   </nav>
   <div class="container">
      <div class="row">
         <div class="col-xs-12">
            <form action="/flippie" method="POST" id="flippie" onsubmit="return false;">
               <p>
                  <label class="checkbox-inline">
                     <input name="led_A" value="1" type="checkbox" data-toggle="toggle" data-onstyle="warning" />
                  </label>
                  <label class="checkbox-inline">
                     <input name="led_B" value="1" type="checkbox" data-toggle="toggle" data-onstyle="warning" />
                  </label>
                  <label class="checkbox-inline">
                     <input name="led_C" value="1" type="checkbox" data-toggle="toggle" data-onstyle="warning" />
                  </label>
               </p>

               <p>
                  <div class="input-group">
                     Address
                     <select name="address" size="1">
                        <option value="0">0: 0-0-0-0-0-0-0</option>
                        <option value="1">1: 1-0-0-0-0-0-0</option>
                        <option value="2">2: 0-1-0-0-0-0-0</option>
                        <option value="3">3: 1-1-0-0-0-0-0</option>
                        <option value="4">4: 0-0-1-0-0-0-0</option>
                        <option value="5">5: 1-0-1-0-0-0-0</option>
                        <option value="6">6: 0-1-1-0-0-0-0</option>
                        <option value="7">7: 1-1-1-0-0-0-0</option>
                        <option value="8">8: 0-0-0-1-0-0-0</option>
                        <option value="9">9: 1-0-0-1-0-0-0</option>
                        <option value="10">10: 0-1-0-1-0-0-0</option>
                        <option value="11">11: 1-1-0-1-0-0-0</option>
                        <option value="12">12: 0-0-1-1-0-0-0</option>
                        <option value="13">13: 1-0-1-1-0-0-0</option>
                        <option value="14">14: 0-1-1-1-0-0-0</option>
                        <option value="15">15: 1-1-1-1-0-0-0</option>
                        <option value="16">16: 0-0-0-0-1-0-0</option>
                        <option value="17">17: 1-0-0-0-1-0-0</option>
                        <option value="18">18: 0-1-0-0-1-0-0</option>
                        <option value="19">19: 1-1-0-0-1-0-0</option>
                        <option value="20">20: 0-0-1-0-1-0-0</option>
                        <option value="21">21: 1-0-1-0-1-0-0</option>
                        <option value="22">22: 0-1-1-0-1-0-0</option>
                        <option value="23">23: 1-1-1-0-1-0-0</option>
                        <option value="24">24: 0-0-0-1-1-0-0</option>
                        <option value="25">25: 1-0-0-1-1-0-0</option>
                        <option value="26">26: 0-1-0-1-1-0-0</option>
                        <option value="27">27: 1-1-0-1-1-0-0</option>
                        <option value="28">28: 0-0-1-1-1-0-0</option>
                        <option value="29">29: 1-0-1-1-1-0-0</option>
                        <option value="30">30: 0-1-1-1-1-0-0</option>
                        <option value="31">31: 1-1-1-1-1-0-0</option>
                        <option value="32">32: 0-0-0-0-0-1-0</option>
                        <option value="33">33: 1-0-0-0-0-1-0</option>
                        <option value="34">34: 0-1-0-0-0-1-0</option>
                        <option value="35">35: 1-1-0-0-0-1-0</option>
                        <option value="36">36: 0-0-1-0-0-1-0</option>
                        <option value="37">37: 1-0-1-0-0-1-0</option>
                        <option value="38">38: 0-1-1-0-0-1-0</option>
                        <option value="39">39: 1-1-1-0-0-1-0</option>
                        <option value="40">40: 0-0-0-1-0-1-0</option>
                        <option value="41">41: 1-0-0-1-0-1-0</option>
                        <option value="42">42: 0-1-0-1-0-1-0</option>
                        <option value="43">43: 1-1-0-1-0-1-0</option>
                        <option value="44">44: 0-0-1-1-0-1-0</option>
                        <option value="45">45: 1-0-1-1-0-1-0</option>
                        <option value="46">46: 0-1-1-1-0-1-0</option>
                        <option value="47">47: 1-1-1-1-0-1-0</option>
                        <option value="48">48: 0-0-0-0-1-1-0</option>
                        <option value="49">49: 1-0-0-0-1-1-0</option>
                        <option value="50">50: 0-1-0-0-1-1-0</option>
                        <option value="51">51: 1-1-0-0-1-1-0</option>
                        <option value="52">52: 0-0-1-0-1-1-0</option>
                        <option value="53">53: 1-0-1-0-1-1-0</option>
                        <option value="54">54: 0-1-1-0-1-1-0</option>
                        <option value="55">55: 1-1-1-0-1-1-0</option>
                        <option value="56">56: 0-0-0-1-1-1-0</option>
                        <option value="57">57: 1-0-0-1-1-1-0</option>
                        <option value="58">58: 0-1-0-1-1-1-0</option>
                        <option value="59">59: 1-1-0-1-1-1-0</option>
                        <option value="60">60: 0-0-1-1-1-1-0</option>
                        <option value="61">61: 1-0-1-1-1-1-0</option>
                        <option value="62">62: 0-1-1-1-1-1-0</option>
                        <option value="63">63: 1-1-1-1-1-1-0</option>
                        <option value="64">64: 0-0-0-0-0-0-1</option>
                        <option value="65">65: 1-0-0-0-0-0-1</option>
                        <option value="66">66: 0-1-0-0-0-0-1</option>
                        <option value="67">67: 1-1-0-0-0-0-1</option>
                        <option value="68">68: 0-0-1-0-0-0-1</option>
                        <option value="69">69: 1-0-1-0-0-0-1</option>
                        <option value="70">70: 0-1-1-0-0-0-1</option>
                        <option value="71">71: 1-1-1-0-0-0-1</option>
                        <option value="72">72: 0-0-0-1-0-0-1</option>
                        <option value="73">73: 1-0-0-1-0-0-1</option>
                        <option value="74">74: 0-1-0-1-0-0-1</option>
                        <option value="75">75: 1-1-0-1-0-0-1</option>
                        <option value="76">76: 0-0-1-1-0-0-1</option>
                        <option value="77">77: 1-0-1-1-0-0-1</option>
                        <option value="78">78: 0-1-1-1-0-0-1</option>
                        <option value="79">79: 1-1-1-1-0-0-1</option>
                        <option value="80">80: 0-0-0-0-1-0-1</option>
                        <option value="81">81: 1-0-0-0-1-0-1</option>
                        <option value="82">82: 0-1-0-0-1-0-1</option>
                        <option value="83">83: 1-1-0-0-1-0-1</option>
                        <option value="84">84: 0-0-1-0-1-0-1</option>
                        <option value="85">85: 1-0-1-0-1-0-1</option>
                        <option value="86">86: 0-1-1-0-1-0-1</option>
                        <option value="87">87: 1-1-1-0-1-0-1</option>
                        <option value="88">88: 0-0-0-1-1-0-1</option>
                        <option value="89">89: 1-0-0-1-1-0-1</option>
                        <option value="90">90: 0-1-0-1-1-0-1</option>
                        <option value="91">91: 1-1-0-1-1-0-1</option>
                        <option value="92">92: 0-0-1-1-1-0-1</option>
                        <option value="93">93: 1-0-1-1-1-0-1</option>
                        <option value="94">94: 0-1-1-1-1-0-1</option>
                        <option value="95">95: 1-1-1-1-1-0-1</option>
                        <option value="96">96: 0-0-0-0-0-1-1</option>
                        <option value="97">97: 1-0-0-0-0-1-1</option>
                        <option value="98">98: 0-1-0-0-0-1-1</option>
                        <option value="99">99: 1-1-0-0-0-1-1</option>
                        <option value="100">100: 0-0-1-0-0-1-1</option>
                        <option value="101">101: 1-0-1-0-0-1-1</option>
                        <option value="102">102: 0-1-1-0-0-1-1</option>
                        <option value="103">103: 1-1-1-0-0-1-1</option>
                        <option value="104">104: 0-0-0-1-0-1-1</option>
                        <option value="105">105: 1-0-0-1-0-1-1</option>
                        <option value="106">106: 0-1-0-1-0-1-1</option>
                        <option value="107">107: 1-1-0-1-0-1-1</option>
                        <option value="108">108: 0-0-1-1-0-1-1</option>
                        <option value="109">109: 1-0-1-1-0-1-1</option>
                        <option value="110">110: 0-1-1-1-0-1-1</option>
                        <option value="111">111: 1-1-1-1-0-1-1</option>
                        <option value="112">112: 0-0-0-0-1-1-1</option>
                        <option value="113">113: 1-0-0-0-1-1-1</option>
                        <option value="114">114: 0-1-0-0-1-1-1</option>
                        <option value="115">115: 1-1-0-0-1-1-1</option>
                        <option value="116">116: 0-0-1-0-1-1-1</option>
                        <option value="117">117: 1-0-1-0-1-1-1</option>
                        <option value="118">118: 0-1-1-0-1-1-1</option>
                        <option value="119">119: 1-1-1-0-1-1-1</option>
                        <option value="120">120: 0-0-0-1-1-1-1</option>
                        <option value="121">121: 1-0-0-1-1-1-1</option>
                        <option value="122">122: 0-1-0-1-1-1-1</option>
                        <option value="123">123: 1-1-0-1-1-1-1</option>
                        <option value="124">124: 0-0-1-1-1-1-1</option>
                        <option value="125">125: 1-0-1-1-1-1-1</option>
                        <option value="126">126: 0-1-1-1-1-1-1</option>
                        <option value="127">127: 1-1-1-1-1-1-1</option>
                     </select>
                  </div>
               </p>

               <p>
                  <div class="input-group">
                     Column
                     <select name="column" size="1">
                        <option value="28">undefined</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                     </select>
                  </div>
               </p>

               <p>
                  <div class="input-group">
                     Row SET
                     <select name="row_set" size="1">
                        <option value="20">undefined</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                     </select>
                  </div>
               </p>

               <p>
                  <div class="input-group">
                     Row RST
                     <select name="row_rst" size="1">
                        <option value="20">undefined</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                     </select>
                  </div>
               </p>

               <p>
                  D <input name="d" type="radio" value="1" /> 1 or <input name="d" type="radio" value="0" /> 0
               </p>

               <hr />

               <p>
                  <div id="shiftregister" style="font-size:150%"></div>
               </p>

               <hr />
               <div class="errors"></div>
               <input type="hidden" name="enable" value="0" />
               <p>
                  <div class="btn-group btn-block">
                     <button type="submit" class="btn btn-success btn-block" value="fire"><span class="glyphicon glyphicon-arrow-right"></span> Fire shift-regsiter</button>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <button type="submit" class="btn btn-danger btn-block" value="fire_enable"><span class="glyphicon glyphicon-arrow-right"></span> Fire shift-regsiter (FP2800A enable)</button>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <button type="reset" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> Clear shift-regsiter</button>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="fill-shiftregister" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> Fill shift-regsiter</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;all&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> all high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;all&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> all low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D0&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D0 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D0&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D0 low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D1&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D1 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D1&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D1 low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D2&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D2 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D2&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D2 low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D3&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D3 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D3&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D3 low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D4&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D4 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D4&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D4 low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D5&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D5 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D5&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D5 low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D6&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D6 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D6&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D6 low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D7&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D7 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D7&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D7 low</a>
                  </div>
               </p>
               <p>
                  <div class="btn-group btn-block">
                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D8&quot;, &quot;state&quot;: 1}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D8 high</a>

                     <a data-task="esp" data-task-params="{&quot;output&quot;: &quot;D8&quot;, &quot;state&quot;: 0}" class="btn btn-default btn-block"><span class="glyphicon glyphicon-arrow-right"></span> D8 low</a>
                  </div>
               </p>
            </form>
         </div>
      </div>
   </div>

   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

   <script>
   var flippie_config;

   function fill_form() {
      $('#flippie input[name="enable"]').val('0');
      $.getJSON('/flippie', {json: 1}).done(function(r) {
         $.each(r, function(k, v) {
            var elem = $('[name="' + k + '"]');
            if(elem[0].tagName == 'INPUT') {
               if(elem.prop('type') == 'radio') {
                  $('input[type="radio"][name="' + k + '"][value="' + v + '"]').prop('checked', true);
               } else if(elem.prop('type') == 'checkbox') {
                  if(parseInt(v) == 1) {
                     elem.prop('checked', true);
                     elem.bootstrapToggle('on');
                  } else {
                     elem.prop('checked', false);
                     elem.bootstrapToggle('off');
                  }
               } else {
                  elem.val(v);
               }
            } else if(elem[0].tagName == 'SELECT') {
               elem.find('option[value="' + v + '"]').prop('selected', 'selected');
            } else {
               elem.val(v);
            }
         });
      }).fail(function( jqxhr, textStatus, error ) {
         var err = textStatus + ", " + error;
         console.log( "Request Failed: " + err );
         $('#flippie .errors').append($('<p />').html('Failed getting flippie json.'));
      });
      display_shift_register();
   }

   function display_shift_register() {
      $.getJSON('/flippie', {shiftregister: 1}).done(function(shift_register_string) {
         $('#shiftregister').empty();
         for (var i = 0, len = shift_register_string.length; i < len; i++) {
            if(i%8 == 0) {
               $('#shiftregister').append(' ');
            }
            $('#shiftregister').append($('<span />').css({color: shift_register_string[i] == '1' ? 'red' : 'black'}).html('&bull;'));
         }
      }).fail(function() {
         $('#flippie .errors').append($('<p />').html('Failed getting shift-register content.'));
      });
   }

   function form_as_object(selector) {
      var data = {};
      $.each($(selector + ' input[type="text"],textarea,input[type="radio"]:checked,select'), function(i, _elem) {
         var elem = $(_elem);
         data[elem.prop('name')] = '' + elem.val();
      });
      $.each($(selector + ' input[type="checkbox"]'), function(i, _elem) {
         var elem = $(_elem);
         data[elem.prop('name')] = elem.prop('checked') ? '1' : '0';
      });
      return data;
   }

   $(document).ready(function() {
      $('#flippie input,select,button,textarea,a').prop('disabled', true);

      $.getJSON('/ui/config.json').done(function(json) {
         flippie_config = json;
         fill_form();
      }).fail(function() {
         $('#flippie .errors').append($('<p />').html('Failed getting flippie configuration.'));
      }).always(function() {
         $('#flippie input,select,button,textarea,a').prop('disabled', false);
      });

      $('#flippie').on('reset', function(e) {
         e.preventDefault();
         $('#flippie input,select,button,textarea,a').prop('disabled', true);
         var elem = $(e.relatedTarget);
         elem.removeClass('glyphicon-exclamation-sign').addClass('glyphicon-refresh glyphicon-refresh-animate');
         $('#flippie .errors').empty();
         $.post('/flippie', {clear: 1}).done(function(r) {
            fill_form();
         }).fail(function() {
            $('#flippie .errors').append($('<p />').html('Failed resetting shift-register.'));
         }).always(function() {
            elem.removeClass('glyphicon-refresh glyphicon-refresh-animate').addClass('glyphicon-exclamation-sign');
            $('#flippie input,select,button,textarea,a').prop('disabled', false);
         });
         return false;
      });

      $('#flippie').on('submit', function(e) {
         e.preventDefault();
         $('#flippie input,select,button,textarea,a').prop('disabled', true);
         $('#flippie [type="submit"][clicked="true"] .glyphicon').removeClass('glyphicon-arrow-right').addClass('glyphicon-refresh glyphicon-refresh-animate');
         $('#flippie input[name="enable"]').val($('#flippie [type="submit"][clicked="true"]').val() == 'fire_enable' ? '1' : '0');
         $('#flippie .errors').empty();
         $.post('/flippie', form_as_object('#flippie')).done(function(r) {
            fill_form();
         }).fail(function() {
            $('#flippie .errors').append($('<p />').html('Failed resetting shift-register.'));
         }).always(function() {
            $('#flippie [type="submit"][clicked="true"] .glyphicon').removeClass('glyphicon-refresh glyphicon-refresh-animate').addClass('glyphicon-arrow-right');
            $('[type=submit]', $('#flippie')).removeAttr('clicked');
            $('#flippie input,select,button,textarea,a').prop('disabled', false);
         });
         return false;
      });

      $('#flippie [type=submit]').click(function() {
           $('[type=submit]', $('#flippie')).removeAttr('clicked');
           $(this).attr('clicked', 'true');
       });

       $('#flippie a[data-task]').on('click', function(e) {
          $('#flippie input,select,button,textarea,a').prop('disabled', true);
          var elem = $(e.target);
          var data = {task: elem.data('task')};
          if(typeof elem.data('taskParams') !== 'undefined') {
             $.each(elem.data('taskParams'), function(key, value) {
                data[key] = value;
             });
          }
          elem.find('.glyphicon').removeClass('glyphicon-arrow-right').addClass('glyphicon-refresh glyphicon-refresh-animate');
          $.post('/flippie', data).done(function(json) {
             display_shift_register();
          }).fail(function() {
             $('#flippie .errors').append($('<p />').html('Failed posing flippie task "' + elem.data('task') + '"."'));
          }).always(function() {
             $('.glyphicon-refresh-animate').removeClass('glyphicon-refresh glyphicon-refresh-animate').addClass('glyphicon-arrow-right');
             $('#flippie input,select,button,textarea,a').prop('disabled', false);
          });
       });
    });
   </script>
</body>
</html>
)D8ESKJ6H4DSKHU" "\0"
